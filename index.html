<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SNOW TIGER CAPITAL</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    background: #000;
    overflow: hidden;
}

#viewer {
    position: fixed;
    inset: 0;
    background: #000;
}

/* Native Android PDF */
.android-frame {
    width: 100%;
    height: 100%;
    border: none;
}

/* PDF.js */
canvas, .linkLayer {
    position: absolute;
    top: 0;
    left: 0;
}

.linkLayer a {
    pointer-events: auto;
    position: absolute;
}
</style>
</head>

<body>
<div id="viewer"></div>

<script type="module">
import * as pdfjsLib from './pdfjs/pdf.mjs';

const PDF_URL = './document.pdf';
const viewer = document.getElementById('viewer');

const ua = navigator.userAgent;
const isAndroid = /Android/i.test(ua);
const isIOS = /iPhone|iPad|iPod/i.test(ua);

/* =====================================================
   ANDROID: native PDF viewer (rock solid)
   ===================================================== */
if (isAndroid && !isIOS) {
    viewer.innerHTML = `
        <iframe
            class="android-frame"
            src="${PDF_URL}"
            title="PDF"
        ></iframe>
    `;
}

/* =====================================================
   DESKTOP + iOS: PDF.js
   ===================================================== */
else {
    pdfjsLib.GlobalWorkerOptions.workerSrc = './pdfjs/pdf.worker.mjs';

    const canvas = document.createElement('canvas');
    const linkLayer = document.createElement('div');
    linkLayer.className = 'linkLayer';

    viewer.appendChild(canvas);
    viewer.appendChild(linkLayer);

    const ctx = canvas.getContext('2d');

    async function render() {
        const pdf = await pdfjsLib.getDocument(PDF_URL).promise;
        const page = await pdf.getPage(1);

        const baseViewport = page.getViewport({ scale: 1 });

        const scale = Math.min(
            window.innerWidth / baseViewport.width,
            window.innerHeight / baseViewport.height
        );

        const viewport = page.getViewport({ scale });

        canvas.width = viewport.width;
        canvas.height = viewport.height;

        canvas.style.width = viewport.width + 'px';
        canvas.style.height = viewport.height + 'px';
        canvas.style.left = (window.innerWidth - viewport.width) / 2 + 'px';
        canvas.style.top = (window.innerHeight - viewport.height) / 2 + 'px';

        linkLayer.style.width = canvas.style.width;
        linkLayer.style.height = canvas.style.height;
        linkLayer.style.left = canvas.style.left;
        linkLayer.style.top = canvas.style.top;

        ctx.setTransform(1, 0, 0, 1, 0, 0);

        await page.render({
            canvasContext: ctx,
            viewport
        }).promise;
    }

    render();
    window.addEventListener('resize', render);
}
</script>
</body>
</html>
